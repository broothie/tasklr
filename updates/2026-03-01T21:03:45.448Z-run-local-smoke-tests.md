# ${TS}: Run local smoke export test and syntax check

What I did

- Read the recent `updates/` files to understand recent work (export UTF-8 filename support and related smoke tests).
- Performed a syntax check of `server.js` using `node --check`.
- Ran the lightweight local smoke export script with `npm run smoke-export-local` which validates the `Content-Disposition` header formatting and JSON serialization without opening network sockets.

Results / Tests performed

- `node --check server.js` completed without syntax errors.
- `npm run smoke-export-local` output:
  - Header format OK: attachment; filename="tasklr-export-..."; filename*=UTF-8''tasklr-export-....json
  - Sample JSON serialization OK

Notes

- No code changes were required for this quick pass; the lightweight test confirms the export header formatting logic used earlier in the repo.
- The repository contains test-only routes behind `ALLOW_TEST_ROUTES=1` that can be used for more realistic integration tests without performing OAuth flows.

Next steps (suggested)

- Add a CI job that runs `npm run smoke-export-local` on each push so this check is automated.
- Add a small integration test that starts `server.js` with `ALLOW_TEST_ROUTES=1` and verifies the `__test/export?download=1` route returns the RFC5987 `filename*` header as expected. This will require a short-lived server spawn in CI.
- Consider expanding test coverage for other export/headers and readiness endpoints.

Turn accounting

- Turn when started: 1
- Turns used for this update: 1

